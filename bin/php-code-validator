#!/bin/bash

if [[ -z "$COMPOSER_RUNTIME_BIN_DIR" ]]; then
  BIN_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
else
  BIN_DIR="$COMPOSER_RUNTIME_BIN_DIR"
fi

# used within project
if [ -f ${BIN_DIR}/phpcs ]; then
    SCRIPT_DIR=${BIN_DIR}/../flyeralarm/php-code-validator
    COMPOSER_BIN=${BIN_DIR}
else # standalone
    SCRIPT_DIR=${BIN_DIR}/..
    COMPOSER_BIN=${BIN_DIR}/../vendor/bin
fi

php ${COMPOSER_BIN}/phpcs -w -p -s --standard=${SCRIPT_DIR}/ruleset.xml "$@"
